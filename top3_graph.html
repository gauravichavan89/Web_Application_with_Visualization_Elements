<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
</head>
	<body>
		<div id="chartContainer" style="height: 370px; width: 50%;"></div>
			<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
			<script src='https://d3js.org/d3.v4.min.js'></script>
			<script>

			d3.csv("2016.csv",function(csv){
			var reg=[];
			var hs=[];

			csv.map(function(d){
			reg.push(d.Country);
			hs.push(d.HappinessScore);
			});

				var hsValue=0;
				var hsValued=0;
				var hsValuei=0;
				for (i=0; i<=reg.length;i++){
					if(reg[i]=='Norway'){
						hsValue = parseFloat(hs[i]);
					}
				}


				for (j=0; j<=reg.length;j++){
					if(reg[j]=='Denmark'){
						hsValued = parseFloat(hs[j]);
					}
				}


				for (k=0; k<=reg.length;k++){
					if(reg[k]=='Iceland'){
						hsValuei = parseFloat(hs[k]);
					}
				}


					d3.csv("2017.csv",function(csv){
						var region=[];
						var hscore=[];
			
						csv.map(function(d){
						region.push(d.Country);
						hscore.push(d.HappinessScore);
						});

							var hsValued1=0;
							var hsValue1d=0;
							var hsValue1i=0;
							for (i=0; i<=region.length;i++){
								if(region[i]=='Norway'){
									hsValued1 = parseFloat(hscore[i]);
								}
							}

							for (j=0; j<=region.length;j++){
								if(region[j]=='Denmark'){
									hsValue1d = parseFloat(hscore[j]);
								}
							}

							for (k=0; k<=region.length;k++){
								if(region[k]=='Iceland'){
									hsValue1i = parseFloat(hscore[k]);
								}
							}

								d3.csv("2015.csv",function(csv){
									var region1=[];
									var h_score=[];

									csv.map(function(d){
									region1.push(d.Country);
									h_score.push(d.HappinessScore);
									});

									var hsValue2=0;
									var hsValued2=0;
									var hsValuei2=0;
									for (i=0; i<=region1.length;i++){
										if(region1[i]=='Norway'){
											hsValue2= parseFloat(h_score[i]);
										}
									}


									for (j=0; j<=region1.length;j++){
										if(region1[j]=='Denmark'){
											hsValued2= parseFloat(h_score[j]);
										}
									}

									for (k=0; k<=region1.length;k++){
										if(region1[k]=='Iceland'){
										hsValuei2 = parseFloat(h_score[k]);
									}
								}


										var chart = new CanvasJS.Chart("chartContainer", {
											theme:"light1",
											//exportEnabled: true,
											animationEnabled: true,
											title:{
												text: "See 2k17's Progress Report here...'"
											},
											axisY :{
												includeZero: false,
												title: "Happiness Score",
											//suffix: "mn"
											},
											toolTip: {
												shared: "true"
											},
											legend:{
												cursor:"pointer",
												fontSize: 16,
												itemclick : toggleDataSeries
											},
											data: [{
												type: "spline",
												showInLegend: true,
												yValueFormatString: "##.##",
												name: "Norway",
												dataPoints: [
													{ label: "2015", y: parseFloat(hsValue2)},
													{ label: "2016", y: parseFloat(Math.floor(hsValue))},
													{ label: "2017", y: parseFloat(Math.ceil(hsValued1))}				
												]
											},
											{
												type: "spline",
												showInLegend: true,
												yValueFormatString: "##.##",
												name: "Denmark",
												dataPoints: [
												{ label: "2015", y: parseFloat(Math.floor(hsValued2))},
												{ label: "2016", y: parseFloat(Math.ceil(hsValued))},
												{ label: "2017", y: parseFloat(hsValue1d)}
												]
											},
											{
												type: "spline",
												showInLegend: true,
												yValueFormatString: "##.##",
												name: "Iceland",
												dataPoints: [
												{ label: "2015", y: parseFloat(hsValuei2)},
												{ label: "2016", y: parseFloat(Math.ceil(hsValuei))},
												{ label: "2017", y: parseFloat(Math.floor(hsValue1i))}
												]
											},

											]
										});
									chart.render();
									function toggleDataSeries(e){
										if (typeof(e.dataSeries.visible) === "undefined" || e.dataSeries.visible) {
												e.dataSeries.visible = false;
											}
										else{
												e.dataSeries.visible = true;
											}
										chart.render();
									}
					});
				});
			});
			</script>
		</div>
	</body>
</html>